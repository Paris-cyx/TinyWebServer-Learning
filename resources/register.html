<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>TinyWebServer - æ³¨å†Œè´¦å·</title>
    <style>
        body { background-color: #f0f2f5; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); width: 300px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 10px;}
        button:hover { background: #218838; }
        #msg { margin-top: 15px; font-weight: bold; min-height: 20px; }
        .success { color: green; } .error { color: red; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸ“ æ³¨å†Œæ–°ç”¨æˆ·</h2>
        <form id="regForm">
            <input type="text" name="user" placeholder="è®¾ç½®ç”¨æˆ·å" required>
            <input type="password" name="password" placeholder="è®¾ç½®å¯†ç " required>
            <button type="submit">ç«‹å³æ³¨å†Œ</button>
        </form>
        <div id="msg"></div>
        <p><a href="/index.html" style="color:#666; font-size: 12px;">å·²æœ‰è´¦å·ï¼Ÿå»ç™»å½•</a></p>
    </div>

    <script>
        document.getElementById('regForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const msgDiv = document.getElementById('msg');
            msgDiv.innerText = "æäº¤ä¸­...";
            
            // å‘é€æ³¨å†Œè¯·æ±‚ (/3 æ˜¯ä½ åç«¯ C++ å®šä¹‰çš„æ³¨å†Œæ¥å£)
            fetch('/3', {
                method: 'POST',
                body: new URLSearchParams(new FormData(this))
            })
            .then(res => res.json())
            .then(data => {
                if(data.code === 200) {
                    msgDiv.innerText = "ğŸ‰ æ³¨å†ŒæˆåŠŸï¼å³å°†è·³è½¬ç™»å½•...";
                    msgDiv.className = "success";
                    setTimeout(() => window.location.href = "/index.html", 1500);
                } else {
                    msgDiv.innerText = "âš ï¸ " + data.msg;
                    msgDiv.className = "error";
                }
            });
        });
    </script>
</body>
</html>